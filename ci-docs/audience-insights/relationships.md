---
title: Зв'язки між сутностями і шляхами до сутностей
description: Створення та керування зв'язками між сутностями з різних джерел даних.
ms.date: 09/27/2021
ms.reviewer: mhart
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: CadeSanthaMSFT
ms.author: cadesantha
manager: shellyha
ms.openlocfilehash: bd80d0315f4f501b8f8108b99c144082c21e0d4c
ms.sourcegitcommit: 5d82e5b808517e0e99fdfdd7e4a4422a5b8ebd5c
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 10/11/2021
ms.locfileid: "7623202"
---
# <a name="relationships-between-entities"></a>Зв’язки між сутностями

Зв'язки з'єднують сутності та визначають граф даних, коли сутності мають однаковий спільний ідентифікатор – зовнішній ключ. На цей зовнішній ключ в одній сутності можна посилатися з іншої. З’єднані сутності дають змогу визначати сегменти та показники на основі кількох джерел даних.

Нижче перелічено три доступні типи зв'язків. 
- Системні зв’язки без можливості редагування, що створюються системою в рамках процесу уніфікації даних
- Успадковані зв'язки без можливості редагування, які автоматично створюються при отриманні даних з джерел даних 
- Настроювані зв'язки, які можна редагувати, що створюються та налаштовуються користувачами

## <a name="non-editable-system-relationships"></a>Системні зв'язки без можливості редагування

Системні зв'язки створюються автоматично під час уніфікації даних, і для цього використовується інтелектуальне зіставлення. Такі зв’язки допомагають пов’язувати записи профілів клієнтів з іншими відповідними записами. На діаграмі нижче продемонстровано створення трьох системних зв'язків. Сутність клієнта зіставляється з іншими сутностями, і в результаті створюється уніфікована сутність *Клієнт*.

:::image type="content" source="media/relationships-entities-merge.png" alt-text="Діаграма, на якій показано шляхи зв’язків для сутності клієнта із трьома зв'язками «один до багатьох».":::

- **Зв’язок *CustomerToContact*** створено між сутністю *Клієнт* та сутністю *Контактна особа*. У сутності *Клієнт* поле ключа **Contact_contactID** пов’язується із полем ключа **contactID** сутності *Контактна особа*.
- **Зв’язок *CustomerToAccount*** створено між сутністю *Клієнт* та сутністю *Бізнес-партнер*. У сутності *Клієнт* поле ключа **Account_accountID** пов’язується із полем ключа **accountID** сутності *Бізнес-партнер*.
- **Зв’язок *CustomerToWebAccount*** створено між сутністю *Клієнт* та сутністю *Веб-бізнес-партнер*. У сутності *Клієнта* поле ключа **WebAccount_webaccountID** пов’язується із полем ключа **webaccountID** сутності *Веб-бізнес-партнер*.

## <a name="non-editable-inherited-relationships"></a>Успадковані зв'язки без можливості редагування

Під час процесу отримання даних система шукає в джерелах даних наявні зв’язки. Якщо зв'язків не існує, система автоматично створює їх. Ці зв'язки використовуються також в низхідних процесах.

## <a name="create-a-custom-relationship"></a>Створення настроюваних зв’язків

Зв'язок складається з *вихідної сутності*, яка містить зовнішній ключ, і *цільової сутності*, на яку вказує зовнішній ключ вихідної сутності. 

1. У розділі «Аналіз аудиторії» виберіть **Дані** > **Зв'язки**.

2. Виберіть елемент **Створити зв’язок**.

3. В області **Новий зв’язок** введіть зазначені нижче відомості.

   :::image type="content" source="media/relationship-add.png" alt-text="Бічна панель «Новий зв’язок» з пустими полями для введення.":::

   - **Ім'я зв’язку**: ім'я, з якого стає ясним призначення цього зв'язку. Наприклад, CustomerToSupportCase.
   - **Опис**: опис зв’язку.
   - **Вихідна сутність**: сутність, яка використовується у зв’язку в якості джерела. Наприклад, SupportCase.
   - **Цільова сутність**: сутність, яка використовується у зв’язку в якості цілі. Наприклад, Клієнт.
   - **Кратність джерела**: укажіть кратність вихідної сутності. Кратність описує можливу кількість елементів у наборі. Вона завжди співвідноситься із кратністю цілі. Ви можете вибрати **Один** або **Багато**. Підтримуються лише зв’язки «багато-до-одного» та «один-до-одного».  
     - Багато-до-одного: кілька вихідних записів можуть зв'язуватися з одним цільовим записом. Наприклад, кілька інцидентів підтримки, створені одним клієнтом.
     - Один-до-одного: один вихідний запис зв’язується із одним цільовим записом. Наприклад, один ідентифікатор лояльності для одного клієнта.

     > [!NOTE]
     > Зв’язки «Багато до багатьох» можна створити, якщо створити два зв’язки «Багато-до-одного» та зв’язати сутність, що пов’язує вихідну та цільову сутність.

   - **Кратність цільового об’єкта**: виберіть кратність записів цільової сутності. 
   - **Вихідне поле ключа**: поле зовнішнього ключа у вихідній сутності. Наприклад, SupportCase може використовувати в якості поля зовнішнього ключа CaseID.
   - **Цільове поле ключа**: поле ключа цільової сутності. Наприклад, сутність «Клієнт» може використовувати поле ключа **CustomerID**.

4. Щоб створити настроюваний зв’язок, виберіть **Створити**.

## <a name="set-up-account-hierarchies"></a>Настроювання ієрархій бізнес-партнерів

Середовища, налаштовані на використання в якості первинної цільової аудиторії ділових бізнес-партнерів, можуть налаштовувати ієрархії бізнес-партнерів для пов'язаних бізнес-партнерів. Наприклад, окремі організаційні одиниці однієї компанії. 

Організації створюють ієрархії бізнес-партнерів, щоб краще керувати бізнес-партнерами та зв'язками між ними. Можливості аналізу аудиторії підтримують ієрархії батьківських і дочірніх бізнес-партнерів, які вже існують в отриманих ззовні даних клієнтів. Наприклад, бізнес-партнерів із Dynamics 365 Sales. Такі ієрархії можна налаштувати на сторінці **Зв'язки** в аналізі аудиторії на вкладці ієрархії бізнес-партнерів.

1. Відкрийте **Дані** > **Зв'язки**.
1. Виберіть вкладку **Ієрархія бізнес-партнера**.
1. Виберіть **Створити ієрархію бізнес-партнера**. 
1. В області **Ієрархія бізнес-партнера** укажіть ім'я для цієї ієрархії. Система створить ім'я для вихідної сутності. Ви можете змінити ім'я вихідної сутності.
1. Виберіть сутність, яка містить ієрархію бізнес-партнера. Зазвичай вона буде у тій самій сутності, яка містить бізнес-партнерів.
1. Виберіть **Ідентифікатор бізнес-партнера** та **Ідентифікатор батьківського бізнес-партнера** у вибраній сутності. 
1. Натисніть **Зберегти**, щоб застосувати настройки та завершити ієрархію бізнес-партнерів.

## <a name="view-relationships"></a>Перегляд зв’язків

На сторінці «Зв'язки» перелічено всі створені зв'язки. Кожен рядок відповідає зв’язку і містить відомості про вихідну сутність, цільову сутність та кратність. 

:::image type="content" source="media/relationships-list.png" alt-text="Список зв'язків і можливості на панелі дій сторінки «Зв'язки».":::

На цій сторінці для наявних та нових зв’язків доступний набір можливостей. 
- **Створити зв’язок**: [Створення настроюваного зв’язку](#create-a-custom-relationship).
- **Графічне відображення**: [відкрийте засіб графічного відображення зв'язків](#explore-the-relationship-visualizer), щоб побачити схематичне зображення мережі наявних зв’язків та їхню кратність.
- **Фільтрувати за**: виберіть тип зв'язків, що відображатиметься у списку.
- **Пошук зв'язків**: скористайтеся текстовим пошуком у властивостях зв'язків.

### <a name="explore-the-relationship-visualizer"></a>Ознайомлення із засобом графічного відображення зв'язків

Засіб графічного відображення зв’язків показує схематичне зображення мережі наявних зв’язків між з’єднаними сутностями та кратність цих зв’язків. Це також відображає шлях до зв'язку.

Щоб настроїти подання, ви можете змінити розташування блоків, перетягуючи їх на полотні.

:::image type="content" source="media/relationship-visualizer.png" alt-text="Знімок екрана: схема мережі у засобі графічного відображення зв'язків, де показано з’єднання між пов’язаними сутностями.":::

Доступні можливості: 
- **Експортувати як зображення**: збережіть зображення поточного подання у файл.
- **Змінити макет на горизонтальний/вертикальний**: змініть вирівнювання сутностей і зв'язків.
- **Редагування**: змініть властивості настроюваних зв’язків в області редагування та збережіть зміни.

## <a name="relationship-paths"></a>Шляхи до зв’язку

Шлях до зв’язку описує сутності, з’єднані за допомогою зв’язків між вихідною сутністю та цільовою сутністю. Він використовується під час створення сегмента або показника, до яких входять сутності, відмінні від сутності єдиного профілю, та якщо існує кілька варіантів, як досягнути сутності єдиного профілю. 

Шлях до зв’язку інформує систему про те, які зв’язки мають доступ до сутності уніфікованого профілю. Різні шляхи до зв'язків можуть приносити різні результати.

Наприклад, сутність *eCommerce_eCommercePurchases*, має такі зв'язки з сутністю єдиною профілю *Клієнт*:

- eCommerce_eCommercePurchases > Клієнт
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > Клієнт
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > Клієнт 

Шлях до зв’язку визначає сутності, які можна використовувати під час створення правил для показників або сегментів. Якщо вибрати параметр з найдовшим шляхом до зв'язку, це як найімовірніше дасть менше результатів, оскільки відповідні записи мають бути частиною всіх сутностей. У цьому прикладі потрібно, щоб клієнт придбав товари за допомогою електронної комерції (eCommerce_eCommercePurchases), у точці збуту (POS_posPurchases), і взяв участь у програмі лояльності (loyaltyScheme_loyCustomers). Якщо вибрати перший варіант, ви ймовірно отримаєте більше результатів, оскільки клієнти повинні існувати лише в одній додатковій сутності.

### <a name="direct-relationship"></a>Прямий зв’язок

Зв’язок класифікується як **прямий зв’язок**, якщо вихідна сутність пов’язується з цільовою сутністю лише одним зв’язком.

Наприклад, якщо сутність справи з назвою *eCommerce_eCommercePurchases* пов’язується з цільовою сутністю *eCommerce_eCommerceContacts* лише за допомогою *ContactId*, це прямий зв’язок.

:::image type="content" source="media/direct_Relationship.png" alt-text="Вихідна сутність пов’язується напряму з цільовою сутністю.":::

#### <a name="multi-path-relationship"></a>Зв’язок з кількома шляхами

**Зв’язок з кількома шляхами** — це спеціальний тип прямого зв’язку, який пов’язує вихідну сутність з більше, ніж однією цільовою сутністю.

Наприклад, якщо сутність справи з іменем *eCommerce_eCommercePurchases* пов’язано з двома цільовими сутностями *eCommerce_eCommerceContacts* и *loyaltyScheme_loyCustomers*, це зв’язок з кількома шляхами.

:::image type="content" source="media/multi-path_relationship.png" alt-text="Вихідна сутність пов’язується безпосередньо з більше, ніж однією цільовою сутністю за допомогою зв’язку з кількома переходами.":::

### <a name="indirect-relationship"></a>Непрямий зв’язок

Зв’язок класифікується як **непрямий зв’язок**, якщо вихідна сутність пов’язується з однією або кількома додатковими сутностями перед зв’язком з цільовою сутністю.

#### <a name="multi-hop-relationship"></a>Зв’язок з кількома переходами

*Зв’язок з кількома переходами* — це *непрямий зв’язок*, що дозволяє вам підключити вихідну сутність до цільової сутності через одну або кілька інших проміжних сутностей.

Наприклад, якщо сутність справи з іменем *eCommerce_eCommercePurchasesWest* підключається до проміжної сутності з іменем *eCommerce_eCommercePurchasesEast*, а потім підключається до цільової сутності з іменем *eCommerce_eCommerceContacts*, це називається зв’язком з кількома переходами.

:::image type="content" source="media/multi-hop_relationship.png" alt-text="Вихідна сутність підключається безпосередньо до цільової сутності за допомогою проміжної сутності.":::

### <a name="multi-hop-multi-path-relationship"></a>Зв’язок з кількома переходами, кількома шляхами

Можна використовувати зв’язки з кількома переходами та кількома шляхами, щоб створювати **зв’язки з кількома переходами, кількома шляхами**. Цей спеціальний тип поєднує функції **зв’язків з кількома переходами** та **кількома шляхами**. Він дає змогу підключатися до більш ніж однієї цільової сутності, одночасно використовуючи проміжні сутності.

Наприклад, якщо сутність справи з іменем *eCommerce_eCommercePurchasesWest* підключається до проміжної сутності з іменем *eCommerce_eCommercePurchasesEast*, а потім підключається до двох цільових сутностей *eCommerce_eCommerceContacts* і *loyaltyScheme_loyCustomers*, це називається зв’язком з кількома переходами, кількома шляхами.

:::image type="content" source="media/multi-hop_multi-path_relationship.png" alt-text="Вихідна сутність підключається напряму до однієї цільової сутності і підключається до іншої цільової сутності через проміжну сутність.":::

## <a name="manage-existing-relationships"></a>Керування наявними зв’язками 

На сторінці «Зв'язки» кожен зв'язок представлений окремим рядком. 

Виберіть зв'язок, а тоді виберіть одну з можливостей з-поміж перелічених нижче. 
 
- **Редагування**: змініть властивості настроюваних зв’язків в області редагування та збережіть зміни.
- **Видалити**: видалення настроюваних зв'язків.
- **Перегляд**: перегляд успадкованих зв’язків та зв’язків, створених системою. 

## <a name="next-step"></a>Наступний крок

Системні та настроювані зв'язки використовуються для [створення сегментів](segments.md) та [показників](measures.md) на основі кількох виведених з ізоляції джерел даних.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
