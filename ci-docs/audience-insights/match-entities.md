---
title: Зіставлення сутностей для уніфікації даних
description: Зіставлення сутностей для створення уніфікованих профілів клієнтів.
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 78549037f9c9e59329f5423c36eeb058128802c0
ms.sourcegitcommit: cf9b78559ca189d4c2086a66c879098d56c0377a
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 11/03/2020
ms.locfileid: "4407273"
---
# <a name="match-entities"></a>Пошук відповідностей у сутностях

Після завершення фази зіставлення ви будете готові виконати пошук відповідностей для своїх сутностей. У фазі пошуку відповідностей визначається спосіб комбінування наборів даних в уніфікований набір даних профілю клієнта. Фаза пошуку відповідностей вимагає наявності щонайменше [двох зіставлених сутностей](map-entities.md).

## <a name="specify-the-match-order"></a>Визначте порядок пошуку відповідностей.

Виберіть елементи **Уніфікувати** > **Знайти відповідності**, а потім — **Установити порядок**, щоб почати фазу пошуку відповідностей.

Кожна відповідність об’єднує дві або більше сутностей в одну сутність, у той самий час зберігаючи кожен унікальний запис клієнта. У наведеному нижче прикладі ми вибрали три сутності: **ContactCSV: TestData** як **Основну** сутність, **WebAccountCSV: TestData** як **Сутність 2** і **CallRecordSmall: TestData** як **Сутність 3**. На схемі над вибраними елементами показано, як буде виконуватися порядок пошуку відповідностей.

> [!div class="mx-imgBorder"]
> ![Редагування порядку пошуку відповідності даних](media/configure-data-match-order-edit-page.png "Редагування порядку пошуку відповідності даних")
  
**Основна** сутність порівнюється із **Сутністю 2**. Набір даних, який є результатом першого збігу, зіставляється з **Сутністю 3**.
У цьому прикладі ми вибрали лише два збіги, але система може підтримувати більше.

> [!IMPORTANT]
> Сутність, яку було вибрано як **Основну**, буде використовуватися як основа для єдиного уніфікованого набору даних. До цієї сутності буде додано додаткові сутності, вибрані під час фази пошуку відповідностей. Одночасно це не означає, що об’єднана сутність міститиме *всі* дані, що містяться в цій сутності.
>
> Існує два міркування, які допоможуть вам вибрати ієрархію сутностей.
>
> - Яка сутність на вашу думку має найбільш повні та достовірні дані про ваших клієнтів?
> - Чи має сутність, яку ви щойно визначили, атрибути, які також спільно використовуються іншими сутностями (наприклад, ім’я, номер телефону або адреса електронної пошти)? Якщо ні, виберіть другу найнадійнішу сутність.

Натисніть кнопку **Готово**, щоб зберегти порядок пошуку відповідностей.

## <a name="define-rules-for-your-first-match-pair"></a>Визначення правил для першої пари відповідностей

Після визначення порядку пошуку відповідностей на сторінці **Пошук відповідностей** відобразяться визначені відповідності. Плитки у верхній частині екрана будуть пустими, доки не буде запущено порядок пошуку відповідностей.

> [!div class="mx-imgBorder"]
> ![Визначення правил](media/configure-data-match-need-rules.png "Визначення правил")

Попередження **Потрібні правила** свідчить про те, що жодного правила відповідності не визначено для пари відповідностей. Правила пошуку відповідностей визначають логіку, за якою буде зіставлятися певна пара сутностей.

1. Щоб визначити перше правило, відкрийте область **Визначення правил**, вибравши відповідний рядок пошуку відповідностей у таблиці збігів (1), а потім виберіть команду **Створити правило** (2).

   > [!div class="mx-imgBorder"]
   > ![Створення правила](media/configure-data-match-new-rule2.png "Створити правило")

2. В області **Редагувати правило** налаштуйте умови для цього правила. Кожну умову представлено двома рядками, які містять обов’язкові вибрані параметри.

   > [!div class="mx-imgBorder"]
   > ![Панель створення правила](media/configure-data-match-new-rule-condition.png "Панель створення правила")

   Сутність або поле (перший) — це атрибут, який використовуватиметься для першої сутності пари збігів. Наприклад, це може включати номер телефону або адресу електронної пошти. Виберіть атрибут, який може бути унікальним для клієнта.

   > [!TIP]
   > Уникайте пошуку відповідностей на основі атрибутів, пов’язаних із типом справи. Іншими словами, якщо атрибут здається дією, то це може бути поганим критерієм для пошуку відповідностей.  

   Сутність або поле (друге) — це атрибут, який використовуватиметься для другої сутності пари збігів.

   Нормалізувати — **Метод нормалізації**: різні параметри нормалізації доступні для вибраних атрибутів. Наприклад, видалення знаків пунктуації або видалення пробілів

   Для нормалізації імені організації (попередній перегляд) можна також вибрати параметр **Тип (телефон, ім’я, організація)**

   > [!div class="mx-imgBorder"]
   > ![Нормалізація — B2B](media/match-normalization-b2b.png "Нормалізація — B2B")

   Рівень точності — рівень точності, який використовуватиметься для цієї умови. Установлення рівня точності для умови відповідності може мати два типи: **Базовий** та **Настроюваний**.  
   - Базовий рівень забезпечує чотири варіанти вибору: низька, середня, висока і повна. Виберіть значення **Точне** для пошуку лише записів, які збігаються на 100 відсотків. Виберіть один із інших рівнів, щоб зіставити записи, які ідентичні не на 100 відсотків.
   - Настроюваний: за допомогою повзунка визначте настроюваний відсоток збігу для записів або введіть значення в поле **Настроюваний**. Система буде виконувати лише пошук відповідностей, які проходять це обмеження як об’єднані пари збігу. Значення на повзунку: від 0 до 1. Таким чином 0,64 становить 64 відсотка.

3. Щоб зберегти правило, натисніть **Готово**.

### <a name="add-multiple-conditions"></a>Додавання кількох умов

Щоб виконати пошук відповідностей, лише якщо виконуються кілька умов, додайте інші умови, пов’язані з оператором AND.

1. В області **Редагувати правило** виберіть **Додати умову**. Крім того, ви також можете видаляти умови, натиснувши кнопку «Видалити» поруч із наявною умовою.

2. Щоб зберегти правило, натисніть **Готово**.

## <a name="add-multiple-rules"></a>Додавання кількох правил

Кожна умова застосовується до однієї пари атрибутів, а правила являють собою набір умов. Щоб виконати пошук відповідностей для сутностей за різними наборами атрибутів, ви можете додати інші правила.

1. У розділі «Аналіз аудиторії» відкрийте **Дані** > **Уніфікувати** > **Зіставити**.

2. Виберіть сутність, яку потрібно оновити, і натисніть кнопку **Додати правила**.

3. Дотримуйтеся вказівок, викладених у розділі [Визначення правил для першої пари відповідностей](#define-rules-for-your-first-match-pair).

> [!NOTE]
> Порядок правил має велике значення. Алгоритм пошуку відповідностей намагається виконати пошук на основі першого правила і переходить до другого правила лише в тому разі, якщо не було знайдено жодного збігу за умовами першого правила.

## <a name="define-deduplication-on-a-match-entity"></a>Визначення вилучення дублікатів для сутності зіставлення

Поряд із визначенням правил зіставлення сутностей, як описано вище, також можна визначити правила вилучення дублікатів. *Вилучення дублікатів* — це процес. Він знаходить повторювані записи, об'єднує їх в один запис і зв'язує всі вихідні записи цього злитого запису з альтернативними ідентифікаторами зі злитим записом.

Після ідентифікації цього запису, отриманого після вилучення дублікатів, він використовуватиметься надалі у процесі перехресного зіставлення сутностей. Вилучення дублікатів здійснюється на рівні сутності та може застосовуватися до кожної сутності, яка використовується в процесі зіставлення.

### <a name="add-deduplication-rules"></a>Додавання правил вилучення дублікатів

1. У розділі «Аналіз аудиторії» відкрийте **Дані** > **Уніфікувати** > **Зіставити**.

1. У розділі **Об'єднані повтори** виберіть **Установити сутності**.

1. У розділі **Параметри злиття** виберіть сутності, до яких потрібно застосувати вилучення дублікатів.

1. Укажіть спосіб злиття повторюваних записів і виберіть один із трьох параметрів злиття.
   - *Максимально заповнений*: ідентифікує запис з найбільш заповненими атрибутами як переможний запис. Це стандартний параметр злиття.
   - *Найостанніший*: ідентифікує переможний запис на основі давності. Вимагає дати або числового поля для визначення давності.
   - *Найдавніший*: ідентифікує переможний запис на основі найбільшого значення давності. Вимагає дати або числового поля для визначення давності.
 
   > [!div class="mx-imgBorder"]
   > ![Правила вилучення дублікатів, крок 1](media/match-selfconflation.png "Правила вилучення дублікатів, крок 1")
 
1. Після вибору сутностей і параметра злиття виберіть параметр **Створити нове правило**, щоб визначити правила вилучення дублікатів на рівні сутності.
   - У меню **Вибір поля** міститься список усіх доступних полів з цієї сутності, для яких потрібно вилучити дублікати вихідних даних.
   - Укажіть такі самі параметри нормалізації та точності, як в зіставленні сутностей.
   - Для визначення додаткових умов можна вибрати параметр **Додати умову**.
 
   > [!div class="mx-imgBorder"]
   > ![Правила вилучення дублікатів, крок 2](media/match-selfconflation-rules.png "Правила вилучення дублікатів, крок 2")

  Можна створити кілька правил вилучення дублікатів для сутності. 

1. Запуск процесу зіставлення групує записи на основі умов, визначених у правилах видалення дублікатів. Після групування записів політика злиття застосовується для визначення переможного запису.

1. Потім цей переможний запис буде передано до відповідного зіставлення сутностей.

1. Будь-які правила настроюваного зіставлення, визначені правил вилучення дублікатів на основі надання переваги з огляду на постійну відповідність і постійну невідповідність. Якщо правило вилучення дублікатів визначає відповідні записи, а правило настроюваного зіставлення не збігається з цими записами, ці два записи не буде зіставлено.

1. Після запуску процесу зіставлення відобразиться статистика видалення дублікатів.
   
> [!NOTE]
> Зазначення правил вилучення дублікатів є необов'язковим. Якщо такі правила не настроєно, застосовуються системні правила. Вони згортають всі записи, які мають однакову комбінацію значень (точна відповідність) з первинного ключа та поля в правилах відповідності в один запис перед передачею даних сутності до зіставлення сутностей для підвищення продуктивності та справності системи.

## <a name="run-your-match-order"></a>Виконання порядку пошуку відповідностей

Після визначення правил зіставлення, включно з правилами для зіставлення сутностей та вилучення дублікатів, можна виконати замовлення на зіставлення. На сторінці **Пошук відповідностей** натисніть кнопку **Виконати**, щоб почати процес. Виконання алгоритму пошуку відповідностей може зайняти деякий час. Не можна змінити властивості на сторінці **Пошук відповідностей**, доки не буде завершено процес пошуку відповідностей. Ви знайдете об’єднану сутність профілю клієнта, яка була створена, на сторінці **Сутності**. Ваша об’єднана сутність клієнта називається **ConflationMatchPairs : CustomerInsights**.

Щоб внести додаткові зміни та перезапустити крок, можна скасувати поточну відповідність. Виберіть текст **Оновлення...** й натисніть **Скасувати замовлення** в нижній частині бічної області, що відображається.

Коли процес пошуку відповідностей завершиться, текст **Оновлення...** зміниться на **Успішно**, і ви знову зможете використовувати всю функціональність сторінки.

Перший процес пошуку відповідностей призводить до створення об’єднаної головної сутності. Усі подальші виконання пошуку відповідностей призводять до розширення цієї сутності.

> [!TIP]
> Існує [шість типів станів](system.md#status-types) для завдань/процесів. Крім того, більшість процесів [залежать від інших низхідних процесів](system.md#refresh-policies). Можна вибрати стан процесу, щоб переглянути докладні відомості про перебіг виконання всієї роботи. Після вибору **Переглянути відомості** для однієї з робіт завдання ви побачите додаткові відомості: час обробки, дата останньої обробки, а також усі помилки та попередження, пов'язані з завданням.

## <a name="review-and-validate-your-matches"></a>Перегляд і перевірка збігів

Оцініть якість пар збігів і відкоригуйте її:

- На сторінці **Пошук відповідностей** ви знайдете дві плитки, які відображають вихідні аналітичні огляди ваших даних.

  - **Унікальні клієнти**: показує кількість унікальних профілів, які визначила система.
  - **Записи з відповідностями**: показує кількість збігів у всіх парах збігів.

- У таблиці **Порядок пошуку відповідностей** ви можете переглянути результати кожної пари збігів, порівнявши кількість записів, що надійшли з цієї сутності «Пара збігів» з відсотком успішно зіставлених записів.

- У розділі сутності **Правила** в таблиці **Порядок пошуку відповідностей** ви знайдете відсоток успішно зіставлених записів на рівні правила. Вибравши символ таблиці поруч із правилом можна переглянути всі ці записи на рівні правила. Рекомендовано переглянути підмножину записів, щоб перевірити, що вони були зіставлені правильно.

- Проекспериментуйте з різними порогами точності для умов, щоб визначити оптимальне значення.

  1. Виберіть три крапки (...) для правила пошуку відповідностей, з яким ви хочете проекспериментувати, а потім натисніть кнопку **Змінити**.

  2. Оберіть умову, з якою ви хочете проекспериментувати. Кожен критерій представлено одним рядком в області **Правило пошуку відповідностей**.

  3. Дані, які ви побачите на сторінці **Попередній перегляд умови** залежить від рівня точності, вибраного для умови. Знайдіть кількість зіставлених та незіставлених записів для вибраної умови.

     Отримайте повне розуміння впливу різних рівнів порогових показників. Ви можете порівняти, скільки записів буде зіставлено при кожному рівні порогу, а також перегляньте записи в кожному параметрі. Виберіть кожну плитку та перегляньте дані в розділі таблиць.

## <a name="optimize-your-matches"></a>Оптимізація пошуку відповідностей

Підвищте якість за допомогою повторного налаштування деяких параметрів пошуку відповідностей.

- **Змініть порядок пошуку відповідностей**, натиснувши кнопку **Змінити** та змініть поля порядку пошуку відповідностей.

  > [!div class="mx-imgBorder"]
  > ![Редагування порядку пошуку відповідності даних](media/configure-data-match-order-edit.png "Редагування порядку пошуку відповідності даних")

- **Змініть порядок правил**, якщо ви визначили кілька правил. Ви можете змінити порядок правил пошуку відповідностей, вибравши параметр **Вгору** та **Вниз** в сітці правил пошуку відповідностей.

  > [!div class="mx-imgBorder"]
  > ![Зміна порядку правил](media/configure-data-change-rule-order.png "Зміна порядку правил")

- **Продублюйте свої правила**, якщо ви визначили правило пошуку відповідностей, і хочете створити аналогічне правило з модифікаціями. Це можна зробити, вибравши команду **Дублювати**.

  > [!div class="mx-imgBorder"]
  > ![Дублювання правила](media/configure-data-duplicate-rule.png "Дублювання правила")

- **Відредагуйте правила**, вибравши символ **Редагувати**. Тепер можна також застосувати перелічені нижче зміни.

  - Змінення атрибутів для умови: виберіть нові атрибути в рядку певної умови.
  - Змінення порогу для умови: налаштуйте повзунок точності.
  - Змінення методу нормалізації для умови: оновіть метод нормалізації.

## <a name="specify-your-custom-match-records"></a>Укажіть настроювані записи пошуку відповідностей

Ви можете указати умови, яким певні записи мають завжди відповідати або ніколи не відповідати. Ці правила можна передати групою в процес пошуку відповідностей.

1. Виберіть параметр **Настроювана відповідність** на екрані **Порядок пошуку відповідностей**.

   > [!div class="mx-imgBorder"]
   > ![Створити настроюваний пошук відповідностей](media/custom-match-create.png "Створити настроюваний пошук відповідностей")

2. Якщо у вас немає переданих сутностей, відобразиться нове діалогове вікно **Настроювана відповідність**, в якому міститься запит на ввід певних відомостей. Якщо ви надали ці відомості раніше, перейдіть до кроку 8.

   > [!div class="mx-imgBorder"]
   > ![Діалогове вікно «Створити настроювану відповідність»](media/custom-match-new-dialog-box.png "Діалогове вікно «Створити настроювану відповідність»")

3. Виберіть елемент **Заповнити шаблон**, щоб отримати файл шаблона, який може вказати, які записи з яких сутностей мають завжди збігатися або ніколи не збігатися. Вам доведеться окремо заповнити записи «завжди збігаються» і «ніколи не збігаються» у двох різних файлах.

4. Шаблон містить поля, які визначають сутність і значення первинного ключа сутності, які будуть використовуватися в настроюваному пошуку відповідностей. Наприклад, якщо потрібно, щоб первинний ключ 12345 з сутності «Збут» збуту завжди збігався з основним ключем 34567 з сутності «Контактна особа», необхідно вказати такі дані:
    - Entity1: Збут
    - Entity1Key: 12345
    - Entity2: Контактна особа
    - Entity2Key: 34567

   Той самий файл шаблону може вказувати настроювані записи пошуку відповідностей з кількох сутностей.

5. Після додавання усіх заміщень, які необхідно застосувати, збережіть файл шаблону.

6.Перейдіть до розділу **Дані** > **Джерела даних** і прийміть файли шаблонів як нові сутності. Після додавання їх можна використовувати, щоб визначити конфігурацію пошуку відповідностей.

7. Після передавання файли та сутності стануть доступними. Виберіть параметр **Настроювана відповідність** ще раз. Відобразяться параметри для визначення сутностей, які необхідно включити. Виберіть потрібні сутності з розкривного меню.

   > [!div class="mx-imgBorder"]
   > ![Заміщення настроюваної відповідності](media/custom-match-overrides.png "Заміщення настроюваної відповідності")

8. Виберіть сутності, які потрібно використовувати для параметрів **Завжди відповідає** та **Ніколи не відповідає**, а потім натисніть кнопку **Готово**.

9. Натисніть кнопку **Зберегти** на сторінці **Пошук відповідностей** для конфігурації настроюваної відповідності, яку ви щойно налаштували.

10. Виберіть команду **Виконати** на сторінці **Пошук відповідностей**, щоб почати процес пошуку відповідностей, і конфігурація настроюваної відповідності вступить у дію. Усі правила, зіставлені системою, замінюються набором конфігурації.

11. Після завершення пошуку відповідностей можна перевірити сутність **ConflationMatchPair**, щоб переконатися, що зміни застосовано в об’єднаних відповідностях.

## <a name="next-step"></a>Наступний крок...

Після завершення процесу пошуку відповідностей для принаймні однієї пари відповідностей ви можете вирішити можливі суперечності в даних, ознайомившись з розділом [**Злиття**](merge-entities.md).
