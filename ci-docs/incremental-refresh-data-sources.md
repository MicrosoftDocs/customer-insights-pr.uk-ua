---
title: Інкрементне оновлення для Power Query джерел даних Azure Data Lake
description: Оновіть нові та оновлені дані для великих джерел даних на Power Query основі джерел даних або Azure data lake джерел даних.
ms.date: 05/30/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-system-schedule
- customerInsights
ms.openlocfilehash: bff27bf7fec2bcb741846ae76bb1f616f459136c
ms.sourcegitcommit: 5e26cbb6d2258074471505af2da515818327cf2c
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 06/14/2022
ms.locfileid: "9012050"
---
# <a name="incremental-refresh-for-power-query-and-azure-data-lake-data-sources"></a>Інкрементне оновлення для Power Query джерел даних Azure Data Lake

У цій статті описано настроювання інкрементного оновлення для джерел даних на Power Query основі або Azure data lake.

Інкрементне оновлення для джерел даних забезпечує зазначені нижче переваги.

- **Швидке оновлення** – оновлюються лише дані, які було змінено. Наприклад, можна оновити лише останні п’ять днів історичного набору даних.
- **Підвищена надійність** – з меншим обсягом оновлення не потрібно підтримувати підключення до нестабільних вихідних систем довго, що зменшує ризик виникнення проблем із підключенням.
- **Зменшене споживання ресурсів** – оновлення лише підмножини загальної кількості даних допомагає ефективніше використовувати ресурси обчислення та зменшує екологічні наслідки.

## <a name="configure-incremental-refresh-for-data-sources-based-on-power-query"></a>Настроювання інкрементного оновлення для джерел даних на основі Power Query

Статистика клієнтів дозволяє інкрементне оновлення для джерел даних, імпортованих за допомогою Power Query цієї підтримки інкрементного прийому. Наприклад, бази даних Azure SQL з полями дати та часу, які вказують, коли записи даних було оновлено останній раз.

1. [Створення нового джерело даних на основі програми Power Query](connect-power-query.md).

1. Виберіть джерело даних, який підтримує інкрементне оновлення, наприклад [базу даних Azure SQL](/power-query/connectors/azuresqldatabase).

1. Виберіть сутності або таблиці для обробки.

1. Завершіть перетворення та натисніть кнопку **Далі**.

1. У діалоговому вікні **Налаштування інкрементного оновлення** виберіть елемент **Налаштування**, щоб відкрити **Параметри інкрементного оновлення**. Якщо натиснути кнопку **Пропустити**, джерело даних оновить весь набір даних.
   > [!TIP]
   > Крім того, можна застосувати інкрементне оновлення пізніше, змінивши наявне джерело даних.

1. У **Параметрах інкрементного оновлення** можна налаштувати інкрементне оновлення для всіх сутностей, вибраних під час створення джерела даних.

   :::image type="content" source="media/incremental-refresh-settings.png" alt-text="Настроювання параметрів інкрементного оновлення.":::

1. Виберіть сутність, а потім укажіть зазначені нижче дані.

   - **Виберіть первинний ключ**: вибір первинного ключа для сутності або таблиці.
   - **Визначте поле «Останнє оновлення»**: у цьому полі відображатимуться лише атрибути типу дата й час. Виберіть атрибут, який вказує на час останнього оновлення записів. Його буде використано для визначення записів у межах часових рамок інкрементного оновлення.
   - **Перевіряти наявність оновлень кожні**: укажіть часові рамки для інкрементного оновлення.

1. Натисніть кнопку **Зберегти**, щоб завершити створення джерела даних. Початкове оновлення даних буде повним оновленням. Після цього інткрементне оновлення даних виконується відповідно до налаштувань на попередньому кроці.

## <a name="configure-incremental-refresh-for-azure-data-lake-data-sources"></a>Настроювання інкрементного оновлення для джерел даних Azure Data Lake

Статистика клієнтів дає змогу поступово оновлювати джерела даних, підключені до Azure Data Lake Storage. Щоб використовувати інкрементне проковтування та оновлення для сутності, настройте цю сутність під час додавання джерело даних Azure Data Lake або пізнішої версії під час редагування джерело даних. Папка даних сутності повинна містити такі папки:

- **FullData**: папка з файлами даних, що містять початкові записи
- **IncrementalData**: Папка з папками ієрархії дати/часу у **форматі yyyy/mm/dd/hh**, що містить інкрементні оновлення. **hh** представляє годину UTC оновлень і містить **папки Upserts** і **Deletes**. **Upserts** містить файли даних з оновленнями наявних записів або нових записів. **Видалення** містить файли даних із записами, які потрібно видалити.

1. Під час додавання або редагування джерело даних перейдіть до **області Атрибути** для сутності.

1. Перегляньте атрибути. Переконайтеся, що створений або останній оновлений атрибут дати настроєно з форматом даних datetime *і* семантичним типом **Calendar**.Date *·*.**·** Якщо це необхідно, відредагуйте атрибут і виберіть **Готово**.

1. **В області Вибір сутностей** відредагуйте сутність. Установлено **прапорець Інкрементне проковтування**.

   :::image type="content" source="media/ADLS_inc_refresh.png" alt-text="Налаштування сутностей у джерелі даних для інкрементного оновлення.":::

   1. Перейдіть до кореневої папки, яка містить файли .csv або ПАРКЕТ для повних даних, інкрементних розширень даних і видалення додаткових даних.
   1. Введіть розширення для повних даних і як інкрементних файлів (\. csv або \. паркет).
   1. Виберіть **Зберегти**.

1. У **полі Останнє оновлення** виберіть атрибут позначки часу дати.

1. Якщо первинний **ключ** не вибрано, виберіть первинний ключ. Первинний ключ є атрибутом, унікальним для сутності. Атрибут, який має стати дійсним первинним ключем, не повинен мати повторюваних значень, відсутніх значень або значень null. Атрибути типу даних String, integer та GUID підтримуються як первинні ключі.

1. Натисніть кнопку **Закрити**, щоб зберегти та закрити область.

1. Продовжуйте додавати або редагувати джерело даних.

[!INCLUDE [footer-include](includes/footer-banner.md)]
