---
title: Інкрементне оновлення для Power Query джерел даних Azure Data Lake і Azure
description: Оновлюйте нові та оновлені дані для великих джерел даних на Power Query основі джерел даних озера даних Azure або Azure.
ms.date: 05/30/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-system-schedule
- customerInsights
ms.openlocfilehash: de39743eb8728fac34e417724c5f73bf44309c89
ms.sourcegitcommit: 5807b7d8c822925b727b099713a74ce2cb7897ba
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 07/28/2022
ms.locfileid: "9207162"
---
# <a name="incremental-refresh-for-power-query-and-azure-data-lake-data-sources"></a>Інкрементне оновлення для Power Query джерел даних Azure Data Lake і Azure

Інкрементне оновлення для джерел даних на Power Query основі Azure Data Lake або Azure Надає такі переваги:

- **Швидке оновлення** – оновлюються лише дані, які було змінено. Наприклад, можна оновити лише останні п’ять днів історичного набору даних.
- **Підвищена надійність** – з меншим обсягом оновлення не потрібно підтримувати підключення до нестабільних вихідних систем довго, що зменшує ризик виникнення проблем із підключенням.
- **Зменшене споживання ресурсів** – оновлення лише підмножини загальної кількості даних допомагає ефективніше використовувати ресурси обчислення та зменшує екологічні наслідки.

## <a name="configure-incremental-refresh-for-data-sources-based-on-power-query"></a>Настроювання інкрементного оновлення джерел даних на основі Power Query

Customer Insights дозволяє поступово оновлювати джерела даних, імпортовані за допомогою Power Query цієї підтримки інкрементного прийому. Наприклад, бази даних Azure SQL з полями дати та часу, які вказують, коли записи даних було оновлено останній раз.

1. [Створіть новий джерело даних на основі Power Query](connect-power-query.md).

1. Виберіть джерело даних, який підтримує поступове оновлення, наприклад [базу даних Azure SQL](/power-query/connectors/azuresqldatabase).

1. Виберіть сутності або таблиці для обробки.

1. Завершіть перетворення та натисніть кнопку **Далі**.

1. У діалоговому вікні **Налаштування інкрементного оновлення** виберіть елемент **Налаштування**, щоб відкрити **Параметри інкрементного оновлення**. Якщо натиснути кнопку **Пропустити**, джерело даних оновить весь набір даних.
   > [!TIP]
   > Крім того, можна застосувати інкрементне оновлення пізніше, змінивши наявне джерело даних.

1. У **Параметрах інкрементного оновлення** можна налаштувати інкрементне оновлення для всіх сутностей, вибраних під час створення джерела даних.

   :::image type="content" source="media/incremental-refresh-settings.png" alt-text="Налаштуйте параметри покрокового оновлення.":::

1. Виберіть сутність, а потім укажіть зазначені нижче дані.

   - **Виберіть первинний ключ**: вибір первинного ключа для сутності або таблиці.
   - **Визначте поле «Останнє оновлення»**: у цьому полі відображатимуться лише атрибути типу дата й час. Виберіть атрибут, який вказує на час останнього оновлення записів. Його буде використано для визначення записів у межах часових рамок інкрементного оновлення.
   - **Перевіряти наявність оновлень кожні**: укажіть часові рамки для інкрементного оновлення.

1. Натисніть кнопку **Зберегти**, щоб завершити створення джерела даних. Початкове оновлення даних буде повним оновленням. Після цього інткрементне оновлення даних виконується відповідно до налаштувань на попередньому кроці.

## <a name="configure-incremental-refresh-for-azure-data-lake-data-sources"></a>Настроювання інкрементного оновлення для джерел даних Azure Data Lake

Customer Insights дозволяє поступово оновлювати джерела даних, підключені до Azure Data Lake Storage. Щоб використовувати інкрементне проковтування та оновлення для сутності, настройте цю сутність під час додавання Azure Data Lake джерело даних або новішої версії під час редагування джерело даних. Папка даних сутності повинна містити такі папки:

- **FullData**: папка з файлами даних, що містять початкові записи
- **IncrementalData**: папка з папками ієрархії дат/часу у **форматі yyyy/mm/dd/hh**, що містить інкрементні оновлення. **hh** представляє UTC годину оновлень і містить **папки Upserts** і **Deletes**. **Upserts** містить файли даних з оновленнями наявних записів або новими записами. **Видалення містить файли даних із записами**, які потрібно видалити.

1. Під час додавання або редагування джерело даних перейдіть до **області Атрибути** для сутності.

1. Перегляньте атрибути. Переконайтеся, що створений або востаннє оновлений атрибут дати настроєно з форматом даних dateTime *і* **семантичним типом** Календаря.Дата *·*.**·** При необхідності відредагуйте атрибут і виберіть **Готово**.

1. **В області Вибір сутностей** відредагуйте сутність. Встановлено прапорець Поступове **проковтування**.

   :::image type="content" source="media/ADLS_inc_refresh.png" alt-text="Налаштування сутностей у джерелі даних для інкрементного оновлення.":::

   1. Перейдіть до кореневої папки, яка містить файли .csv або паркету, щоб отримати повні дані, поступове підвищення рівня даних і поступове видалення даних.
   1. Введіть розширення для повних даних і обидва інкрементні файли (\. csv або \. паркет).
   1. Для .csv файлів виберіть роздільник стовпців і, якщо потрібно, щоб перший рядок файлу був заголовком стовпця.
   1. Виберіть **Зберегти**.

1. Для **параметра**"Останнє оновлення" виберіть атрибут часової позначки дати.

1. Якщо первинний **ключ** не вибрано, виберіть первинний ключ. Первинний ключ - це атрибут, унікальний для сутності. Атрибут, який має стати дійсним первинним ключем, не повинен мати повторюваних значень, відсутніх значень або значень null. Атрибути типу даних String, integer і GUID підтримуються як первинні ключі.

1. Натисніть кнопку **Закрити**, щоб зберегти та закрити область.

1. Продовжуйте додавати або редагувати джерело даних.

[!INCLUDE [footer-include](includes/footer-banner.md)]
