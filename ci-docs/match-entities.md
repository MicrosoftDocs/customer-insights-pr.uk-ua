---
title: Зіставлення сутностей для уніфікації даних
description: Зіставлення сутностей для створення уніфікованих профілів клієнтів.
recommendations: false
ms.date: 05/05/2022
ms.subservice: audience-insights
ms.topic: tutorial
author: v-wendysmith
ms.author: mukeshpo
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-match
- ci-merge
- ci-map
- customerInsights
ms.openlocfilehash: bc470dd932c2c981adc5840bb52d60f8dfe0de61
ms.sourcegitcommit: 6a5f4312a2bb808c40830863f26620daf65b921d
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 05/11/2022
ms.locfileid: "8740974"
---
# <a name="match-conditions"></a>Умови матчу

[!INCLUDE [m3-prod-trial-note](includes/m3-prod-trial-note.md)]

Цей крок в об'єднанні визначає порядок відповідності та правила для перехресного зіставлення сутностей. Для цього кроку потрібні принаймні дві сутності.

> [!NOTE]
> Після створення умов відповідності та вибору кнопки **Далі** не можна видалити вибрану сутність або атрибут. Якщо потрібно, натисніть кнопку **Назад**, щоб переглянути вибрані сутності та атрибути, перш ніж продовжити.

## <a name="include-enriched-entities-preview"></a>Включити збагачені сутності (попередній перегляд)

Якщо ви збагатили сутності на рівні джерело даних, щоб покращити результати об'єднання, виберіть їх. Для отримання додаткових відомостей [див](data-sources-enrichment.md). Якщо на сторінці Повторювані **записи** вибрано збагачені сутності, вибирати їх знову не потрібно.

1. **На сторінці Відповідні умови** виберіть пункт **Використовувати збагачені сутності** у верхній частині сторінки.

1. **В області Використовувати збагачені сутності** виберіть одну або кілька збагачених сутностей.

1. Виберіть **Готово**.

## <a name="specify-the-match-order"></a>Визначте порядок пошуку відповідностей.

Кожне зіставлення об'єднує дві або більше сутності в єдину консолідовану сутність. У той же час зберігаються унікальні записи клієнтів. Порядок відповідності вказує порядок, в якому система намагається зіставити записи.

> [!IMPORTANT]
> Перша сутність у списку називається основною сутністю. Основна сутність служить основою для набору даних уніфікованих профілів. До цієї сутності буде додано додаткові вибрані сутності.
>
> Важливі міркування:
>
> - Виберіть сутність із найповнішими та найнадійнішими даними профілю про ваших клієнтів як основну сутність.
> - Виберіть сутність, яка має кілька спільних атрибутів з іншими сутностями (наприклад, ім'я, номер телефону або адресу електронної пошти) як основну сутність.

1. **На сторінці Відповідні умови** використовуйте стрілки вгору та вниз, щоб перемістити сутності в потрібному порядку або перетягнути їх. Наприклад, виберіть **Контакти:електронна комерція** як основну сутність, а **CustomerLoyalty:Loyalty** як другу сутність.

1. Щоб кожен запис у об'єкті був унікальним клієнтом, незалежно від того, чи знайдено відповідність, виберіть пункт **Включити всі записи**. Будь-які записи в цій сутності, які не збігаються з записами в будь-яких інших об'єктах, включаються до єдиного профілю. Записи, які не мають збігу, називаються singletons.
  
Основна сутність *Контакти:електронна комерція* збігається з наступною організацією *CustomerLoyalty:Loyalty*. Набір даних, який є результатом першого кроку відповідності, зіставляється з такою сутністю, якщо у вас більше двох сутностей.

:::image type="content" source="media/m3_match.png" alt-text="Знімок екрана: вибраний порядок відповідності для сутностей." lightbox="media/m3_match.png":::

## <a name="define-rules-for-match-pairs"></a>Визначення правил зіставлення пар

Правила пошуку відповідностей визначають логіку, за якою буде зіставлятися певна пара сутностей. Правило складається з однієї або декількох умов.

Попередження поруч з іменем сутності означає, що для пари матчів не визначено правило відповідності.

1. Виберіть пункт **Додати правило** для пари сутностей, щоб визначити правила відповідності.

1. **В області Додавання правила** настройте умови для правила.

   :::image type="content" source="media/m3_add_rule.png" alt-text="Знімок екрана: область додавання правила.":::

   - **Виберіть "Сутність/поле" (перший рядок)**: виберіть пов'язану сутність і атрибут, щоб указати властивість запису, яка, ймовірно, унікальна для клієнта. Наприклад, номер телефону або адреса електронної пошти. Уникайте зіставлення за атрибутами типу справи. Наприклад, ідентифікатор покупки зазвичай не знайде відповідності в інших типах записів.

   - **Виберіть "Сутність/поле" (другий рядок)**: виберіть атрибут, який стосується атрибута сутності, указаного в першому рядку.

   - **Нормалізувати**: виберіть з наведених параметрів нормалізації для вибраних атрибутів.
     - **Цифри**: перетворює інші системи числення, такі як римські цифри, на арабські цифри. *VIII* стає *8*.
     - **Символи**: видаляє всі символи та спеціальні символи. *Head&Shoulder* стає *HeadShoulder*.
     - **Текст у нижньому регістрі**: перетворює всі символи на нижній регістр. *ALL CAPS and Title Case* стає *all caps and title case*.
     - **Тип (телефон, ім'я, адреса, організація)**: стандартизує імена, назви, номери телефонів, адреси та організації.
     - **Юнікод до ASCII**: перетворює позначення Юнікоду на символи ASCII. */u00B2* стає *2*.
     - **пробіли**: видаляє всі пробіли. *Hello   World* стає *HelloWorld*.

   - **Точність**: задаєте рівень точності, який застосовуватимуться для цієї умови.
     - **Основні**: виберіть з *низьких (30%)*, *середніх (60%)*, *високих (80%)* і *точних (100%)*. Виберіть **"Точний"**, щоб відповідати лише записам, які відповідають 100 відсоткам.
     - **Настроюваний**: установити відсоток, на який записи повинні збігатися. Система зіставлятиме лише записи, які перевищують цей поріг.

   - **Ім'я**: ім'я правила.

1. Щоб зіставити сутності, лише якщо атрибути відповідають кільком умовам, виберіть **додати** > **умову**, щоб додати додаткові умови до правила відповідності. Умови зв'язані з логічним оператором AND, отже, виконуються лише за виконання всіх умов.

1. За бажанням розгляньте додаткові параметри, такі як [винятки](#add-exceptions-to-a-rule) або [настроювані умови](#specify-custom-match-conditions) відповідності.

1. Натисніть кнопку **Готово**, щоб завершити правило.

1. За потреби [можна додати інші правила](#add-rules-to-a-match-pair).

1. Натисніть кнопку **Далі**.

> [!div class="nextstepaction"]
> [Наступний крок: Об'єднання полів](merge-entities.md)

### <a name="add-rules-to-a-match-pair"></a>Додавання правил до пар зіставлення

Правила зіставлення відповідають наборам умов. Щоб зіставити сутності за умовами на основі кількох атрибутів, додайте додаткові правила.

1. Виберіть елемент **Додати правило** для сутності, до якої потрібно додати правила.

1. Виконайте кроки, описані в статті [Визначення правил для зіставлення пар](#define-rules-for-match-pairs).

> [!NOTE]
> Порядок правил має значення. Алгоритм відповідності намагається зіставити заданий запис клієнта на основі вашого першого правила і продовжує друге правило, тільки якщо збіги не були визначені з першим правилом.

## <a name="advanced-options"></a>Додаткові параметри

### <a name="add-exceptions-to-a-rule"></a>Додавання винятків до правила

У більшості випадків відповідність сутності призводить до унікальних профілів клієнтів із консолідованими даними. Для динамічного вирішення рідкісних випадків помилкових спрацьовувань і помилкових негативів можна визначити винятки для правила матчу. Винятки застосовуються після обробки правил відповідності та уникнення зіставлення всіх записів, які відповідають критеріям винятку.

Наприклад, якщо ваше правило матчу поєднує в собі прізвище, місто і дату народження, система буде ідентифікувати близнюків з тими ж прізвище, які живуть в тому ж місті, що і той же профіль. Можна вказати виняток, який не відповідає профілям, якщо ім'я в об'єднаних об'єднаних сутностях не збігаються.

1. **В області Редагування правила** натисніть кнопку **Додати** > **виняток**.

1. Укажіть критерії винятків.

1. Щоб зберегти правило, натисніть **Готово**.

### <a name="specify-custom-match-conditions"></a>Визначте умови настроюваного зіставлення

Можна вказати умови, які перевизначають логіку відповідності за промовчанням. Існує чотири варіанти:

|Варіант  |Опис |Приклад  |
|---------|---------|---------|
|Завжди відповідає     | Визначає значення, які завжди збігаються.         |  Завжди матч *Майк* і *MikeR*.       |
|Ніколи не відповідає     | Визначає значення, які ніколи не збігаються.        | Ніколи не зрівняйтеся з *Джоном* і *Джонатаном*.        |
|Настроюваний обхід     | Визначає значення, які система завжди повинна ігнорувати на етапі відповідності. |  Ігнорувати значення *11111* і *невідомий* під Вільний час матчу.        |
|Зіставлення псевдонімів    | Визначення значень, які система повинна розглядати як одне і те ж значення.         | Подумайте, *що Джо* дорівнює *Джозефу*.        |

1. Виберіть пункт **Користувацьке**.

   :::image type="content" source="media/m3_match_custom.png" alt-text="Настроювана кнопка":::

1. Виберіть настроюваний **тип** і виберіть завантажити **шаблон**. Вам потрібен окремий шаблон для кожного варіанту матчу.

1. Відкрийте завантажений файл шаблону та заповніть відомості. Шаблон містить поля, які визначають сутність і значення первинного ключа сутності, які будуть використовуватися в настроюваному пошуку відповідностей. Наприклад, якщо вам потрібно, щоб первинний ключ *12345* з сутності *Збут* завжди зіставлявся з первинним ключем *34567* з сутності *Контакт*, заповніть шаблон:
    - Entity1: Збут
    - Entity1Key: 12345
    - Entity2: Контактна особа
    - Entity2Key: 34567

   Той самий файл шаблону може вказувати настроювані записи пошуку відповідностей з кількох сутностей.

   Якщо потрібно вказати настроюване зіставлення для вилучення дублікатів для сутності, укажіть ту саму сутність, що й Сутність1 і Сутність2, і встановіть різні значення первинного ключа.

1. Після додавання всіх перевизначень збережіть файл шаблону.

1. Перейдіть до розділу **Дані** > **Джерела даних** і прийміть файли шаблонів як нові сутності.

1. Після завантаження файлів знову виберіть **параметр Custom**. Виберіть необхідні сутності зі спадного меню та натисніть кнопку **Готово**.

   :::image type="content" source="media/custom-match-overrides.png" alt-text="Знімок екрана: діалог вибору замін для настроюваного сценарію зіставлення.":::

1. Застосування настроюваної відповідності залежить від потрібного параметра відповідності.

   - Для **параметра Завжди збігатися** або **Ніколи не збігайтеся**, перейдіть до наступного кроку.
   - Для **зіставлення** "Обхід"**або**"Псевдонім" виберіть "**Редагувати"** в наявному правилі відповідності або створіть нове правило. У розкривному списку Нормалізація виберіть **параметр Користувацький обхід** або **зіставлення** псевдонімів і натисніть кнопку **Готово**.

1. На настроюваній **панелі** натисніть кнопку **Готово**, щоб застосувати настроювану конфігурацію відповідності.

> [!div class="nextstepaction"]
> [Наступний крок: Об'єднання полів](merge-entities.md)

[!INCLUDE [footer-include](includes/footer-banner.md)]
