---
title: Створення складних сегментів за допомогою конструктора сегментів
description: Використовуйте конструктор сегментів для створення складних сегментів клієнтів шляхом групування їх на основі різних атрибутів.
ms.date: 03/25/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: cde373cd65e296675e1b3c92f3024e1093853842
ms.sourcegitcommit: 8a28e9458b857adf8e90e25e43b9bc422ebbb2cd
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 07/18/2022
ms.locfileid: "9170660"
---
# <a name="create-complex-segments-with-segment-builder"></a>Створення складних сегментів за допомогою конструктора сегментів

Визначайте складні фільтри для уніфікованої сутності клієнта та пов'язаних із нею сутностей. Кожен сегмент, після обробки, створює набір записів клієнтів, які можна експортувати та для яких можна вжити заходів.

> [!TIP]
> Сегменти, які основані на **індивідуальних клієнтах**, автоматично включають наявні контактні відомості для учасників сегмента. У середовищах для **ділових бізнес-партнерів** сегменти ґрунтуються на бізнес-партнерах (компаніях або дочірніх підрозділах). Щоб внести контактні відомості в сегмент, скористайтеся функцією **Проектування атрибутів** в конструкторі сегментів. Переконайтеся, що джерела даних контактних осіб [семантично зіставлено з сутністю ContactProfile](semantic-mappings.md#define-a-contactprofile-semantic-entity-mapping).

## <a name="segment-builder"></a>Конструктор сегментів

На зображенні нижче показано різні аспекти конструктора сегментів. Тут відображено сегмент, що в результаті формує групу клієнтів. Клієнти замовляли товари в межах певних часових рамок та отримали бали винагороди або витратили певну суму коштів.

:::image type="content" source="media/segment-builder-overview.png" alt-text="Елементи конструктора сегментів." lightbox="media/segment-builder-overview.png":::

1. Упорядкуйте сегмент за допомогою правил та вкладених правил. Кожне правило та вкладене правило складається з умов. Об'єднайте умови з логічними операторами.

1. Виберіть [шлях зв’язку](relationships.md) між сутностями, який застосовується до правила. Шлях до зв'язку визначає, які атрибути можна використовувати в умові.

1. Керуйте правилами та вкладеними правилами. Змініть позицію правила або видаліть його.

1. Додайте умови та створіть необхідний рівень вкладеності за допомогою вкладених правил.

1. Застосуйте операції наборів до підключених правил.

1. Використайте область атрибутів, щоб додати доступні атрибути сутності або створити умови на основі атрибутів. В області відображається список доступних для вибраного правила сутностей і атрибутів, що залежить від вибраного шляху зв'язку.

1. Додайте умови на основі атрибутів до наявних правил та вкладених правил, або додайте їх до нового правила.

1. Скасовуйте та повторюйте зміни під час конструювання сегмента.

У наведеному вище прикладі проілюстровано функціонал сегментації. Ми визначили сегмент для клієнтів, які придбали товарів принаймні на $500 онлайн *і* мають інтереси, пов’язані із розробкою програмного забезпечення.

## <a name="create-a-new-segment-with-segment-builder"></a>Створення нового сегмента за допомогою конструктора сегментів

1. Перейдіть до розділу **Сегменти**.

1. Виберіть **Створити** > **Створити власний**. На сторінці конструктора сегментів визначаються або створюються правила. Правило складається з однієї або кількох умов, які визначають множину клієнтів.

1. Виберіть елемент **Редагувати відомості** поруч із пунктом Сегмент без назви. Укажіть ім'я сегмента та змініть запропоноване **Ім’я вихідної сутності** для цього сегмента. За бажанням додайте опис і [теги](work-with-tags-columns.md#manage-tags) до сегмента.

   :::image type="content" source="media/segments_edit_details.png" alt-text="Діалогове вікно &quot;Редагування відомостей&quot;.":::

1. **У розділі Правило1** виберіть атрибут сутності, за якою потрібно фільтрувати клієнтів. Існує два способи вибору атрибутів.
   - Прогляньте список доступних сутностей і атрибутів в області **Додати до правила** та виберіть піктограму **+** поруч із атрибутом, який потрібно додати. Виберіть, чи потрібно додати атрибут до наявного правила або ж слід використати його для створення нового правила.
   - Уведіть ім'я атрибута в розділі правила, щоб побачити відповідні пропозиції.

1. Виберіть оператори, щоб указати, які значення відповідатимуть умові. Значення атрибуту може належати до одного з чотирьох типів даних: числовий, рядок, дата або логічне значення. Залежно від типу даних атрибута для визначення умови будуть доступні різні оператори. Для сегментів із діловими бізнес-партнерами доступні два спеціальні оператори, які дозволяють опрацьовувати ієрархічні відношення, які можуть існувати між отриманими бізнес-партнерами. Для включення пов'язаних бізнес-партнерів скористайтеся операторами *є дочірнім для* та *є батьківським для*.

1. Виберіть **Додати умову**, щоб додати до правила більше умов. Щоб створити правило під поточним правилом, виберіть **Додати вкладене правило**.

1. Якщо в правилі використовуються інші сутності, крім *сутності клієнта*, виберіть установити **шлях** зв'язку, щоб зіставити вибрану сутність з об'єднаною сутністю клієнта. Якщо є лише один можливий шлях зв'язку, система вибирає його автоматично. Різні [шляхи](relationships.md#relationship-paths) зв'язків можуть давати різні результати. Кожне правило може мати власний шлях зв'язку.

   :::image type="content" source="media/relationship-path.png" alt-text="Можливий шлях зв'язку під час створення правила на основі сутності, зіставленої з уніфікованою сутністю клієнта.":::

1. Якщо в правилі є кілька умов, виберіть, який логічний оператор їх з'єднує.  
   - Оператор **І**: усі умови повинні виконуватися, щоб запис було включено до сегмента. Використовуйте цей параметр, коли ви визначаєте умови для різних сутностей.
   - Оператор **АБО**: будь-яка одна з умов повинна виконуватися, щоб запис було включено до сегмента. Використовуйте цей параметр, коли ви визначаєте кілька умов для однієї сутності.

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="Правило із двома умовами І.":::

   При використанні оператора АБО всі умови мають бути основані на сутностях, включених до шляху зв'язку.

1. Щоб створити різні набори записів клієнтів, створіть кілька правил. Щоб включити клієнтів, необхідних для вашого бізнес-кейсу, об'єднайте групи. Зокрема, якщо не вдається включити сутність у правило через вказаний шлях зв'язку, створіть нове правило для вибору атрибутів з нього.

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="Додайте нове правило до сегмента та виберіть оператор набору.":::

   1. Виберіть елемент **Додати правило**.
   1. Виберіть одну з операцій з множинами: **Об'єднання**, **Перетин** або **Окрім**.

      - **Об’єднання** об’єднує дві групи.
      - **Перетин** перекриває дві групи. Лише дані, які *є загальними* для обох груп, залишаються в уніфікованій групі.
      - **Окрім** об’єднує дві групи. Зберігатимуться лише дані у групі A, які *не є загальними* для даних у групі B.

1. За замовчуванням сутність виводу автоматично міститиме всі атрибути профілів клієнтів, які відповідають визначеним фільтрам. Якщо сегмент базується на інших сутностях, ніж *сутність клієнта*, виберіть атрибути **Project**, щоб додати більше атрибутів цих сутностей до вихідної сутності.

   > [!IMPORTANT]
   > Для сегментів на основі бізнес-рахунків дані одного або кількох контактів кожного облікового запису від *організації ContactProfile* повинні бути включені в сегмент, щоб дозволити активувати або експортувати цей сегмент до місць призначення, для яких потрібна контактна інформація. Додаткові відомості про сутність *ContactProfile* див. в розділі [Семантичні зіставлення](semantic-mappings.md).
   > Приклад вихідних даних для сегмента на основі бізнес-партнерів із прогнозованими атрибутами контактних осіб може виглядати таким чином:
   >
   > |ІДЕНТИФІКАТОР  |Ім’я облікового запису  |Дохід  |Ім’я контактної особи  | Роль контактної особи|
   > |---------|---------|---------|---------|---|
   > |10021     | Contoso | 100K | [Abbie Moss, Ruth Soto]  | [CEO, Procurement manager]

   :::image type="content" source="media/segments-project-attributes.png" alt-text="Приклад спроектованих атрибутів, вибраних у бічній області, які буде додано до вихідної сутності.":::
  
   Наприклад, сегмент базується на сутності, яка містить дані про придбання, що пов'язані із сутністю *Клієнт*. Цей сегмент шукає всіх клієнтів з Іспанії, які придбали товари у поточному році. Ви можете додати атрибути, такі як ціна товару або дата придбання, до всіх відповідних записів клієнтів у вихідній сутності. Така інформація може стати в пригоді для аналізу сезонності у загальних сумах видатків.

   > [!NOTE]
   > - **Проектування атрибутів** працює лише для сутностей, які мають зв'язок «один до багатьох» із сутністю клієнта. Наприклад, один клієнт може мати кілька передплат.
   > - Якщо потрібний атрибут для проектування відстоїть більше ніж на один перехід від сутності *Клієнт* (за визначенням у зв'язку), цей атрибут слід використовувати в кожному правилі запиту сегмента, який будується.
   > - Якщо потрібний атрибут для проектування відстоїть рівно на один перехід від сутності *Клієнт*, такий атрибут не обов'язково має використовуватись в кожному правилі запиту сегмента, який будується.
   > - **Спроектовані атрибути** враховуються при використанні операцій з множинами.

1. Натисніть кнопку **Виконати**, щоб створити відрізок. Натисніть кнопку **Зберегти**, якщо потрібно зберегти поточну конфігурацію та запустити сегмент пізніше. Відобразиться сторінка **Сегменти**.

### <a name="segment-builder-tips"></a>Поради конструктора сегментів

Створюючи сегмент за допомогою конструктора сегментів, пам'ятайте про наступні поради:

- Конструктор сегментів не пропонуватиме припустимі значення із сутностей під час задавання операторів для умов. Ви можете відкрити **Дані** > **Сутності** і завантажити дані сутності, щоб побачити, які значення доступні.
- Умови на основі дат дають змогу переключатися між фіксованими датами та плаваючим діапазоном дат.
- Якщо для сегмента є кілька правил, поруч із правилом, що редагується, відображатиметься вертикальна синя лінія.
- Правила та умови можна переміщувати до інших місць у визначенні сегмента. Виберіть вертикальні три крапки (&vellip;) поруч із правилом або умовою та виберіть, як і куди їх перемістити.
- Елементи керування **Скасувати** та **Повторити** на панелі команд дозволяють відкочувати зміни.
- Після створення сегмента деякі сегменти дозволяють [відстежувати використання сегмента](segments.md#track-usage-of-a-segment).

## <a name="next-steps"></a>Наступні кроки

[Експортуйте сегмент](export-destinations.md) і ознайомтеся з [інтеграцією картки клієнта](customer-card-add-in.md) для використання сегментів в інших програмах.

[!INCLUDE [footer-include](includes/footer-banner.md)]
