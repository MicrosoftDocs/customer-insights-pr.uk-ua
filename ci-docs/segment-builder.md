---
title: Створення складних сегментів за допомогою конструктора сегментів
description: Використовуйте конструктор сегментів для створення складних сегментів клієнтів шляхом групування їх на основі різних атрибутів.
ms.date: 08/12/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: 7f691fd0b2ea76a2960d5adf766a4b166f02ebb4
ms.sourcegitcommit: 267c317e10166146c9ac2c30560c479c9a005845
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 08/16/2022
ms.locfileid: "9304774"
---
# <a name="create-complex-segments-with-segment-builder"></a>Створення складних сегментів за допомогою конструктора сегментів

Визначте складні фільтри навколо уніфікованого клієнта або уніфікованого контакту та пов’язаних з ним осіб. Кожен сегмент після обробки створює набір записів клієнтів або контактів, які можна експортувати та вживати заходів.

> [!TIP]
> Сегменти, які основані на **індивідуальних клієнтах**, автоматично включають наявні контактні відомості для учасників сегмента. Якщо **в корпоративних облікових записах** об’єднано [обидва](data-unification.md) облікові записи та контакти, виберіть, чи буде сегмент базуватися на облікових записах або бізнес-контактах. Щоб експортувати до місця призначення очікувану контактну інформацію, скористайтеся сегментом контактів. Щоб експортувати до місця призначення очікувані відомості облікового запису, використовуйте сегмент облікових записів.

## <a name="segment-builder"></a>Конструктор сегментів

На зображенні нижче показано різні аспекти конструктора сегментів. Тут відображено сегмент, що в результаті формує групу клієнтів. Клієнти замовляли товари в межах певних часових рамок та отримали бали винагороди або витратили певну суму коштів.

:::image type="content" source="media/segment-builder-overview.png" alt-text="Елементи конструктора сегментів." lightbox="media/segment-builder-overview.png":::

1. Упорядкуйте сегмент за допомогою правил та вкладених правил. Кожне правило та вкладене правило складається з умов. Об’єднайте умови з логічними операторами.

1. Виберіть [шлях зв’язку](relationships.md) між сутностями, який застосовується до правила. Шлях до зв'язку визначає, які атрибути можна використовувати в умові.

1. Керуйте правилами та вкладеними правилами. Змініть позицію правила або видаліть його.

1. Додайте умови та створіть необхідний рівень вкладеності за допомогою вкладених правил.

1. Застосуйте операції наборів до підключених правил.

1. Використайте область атрибутів, щоб додати доступні атрибути сутності або створити умови на основі атрибутів. В області відображається список доступних для вибраного правила сутностей і атрибутів, що залежить від вибраного шляху зв'язку.

1. Додайте умови на основі атрибутів до наявних правил та вкладених правил, або додайте їх до нового правила.

1. Скасовуйте та повторюйте зміни під час конструювання сегмента.

У наведеному вище прикладі проілюстровано функціонал сегментації. Ми визначили сегмент для клієнтів, які придбали товарів принаймні на $500 онлайн *і* мають інтереси, пов’язані із розробкою програмного забезпечення.

## <a name="create-a-new-segment-with-segment-builder"></a>Створення нового сегмента за допомогою конструктора сегментів

1. Перейдіть до розділу **Сегменти**.

1. Виберіть **Створити** > **Створити власний**. На сторінці конструктора сегментів визначаються або створюються правила. Правило складається з однієї або кількох умов, які визначають множину клієнтів.

   > [!NOTE]
   > Для середовищ на основі бізнес-облікових записів виберіть **Новий** > **сегмент облікових записів** або **Сегмент контактів (попередній перегляд)** на основі типу сегмента, який потрібно створити. Якщо визначено ієрархію [облікового](relationships.md#set-up-account-hierarchies) запису та потрібно створити правила для фільтрування даних на основі зв’язків дітей і батьків, установіть прапорець **Використовувати ієрархію? (попередній перегляд)**, виберіть ієрархію, а потім **застосувати**.
   >
   > :::image type="content" source="media/segment_acct_hierarchy.png" alt-text="Сегмент виберіть область ієрархії облікових записів.":::

1. Виберіть елемент **Редагувати відомості** поруч із пунктом Сегмент без назви. Укажіть ім'я сегмента та змініть запропоноване **Ім’я вихідної сутності** для цього сегмента. За бажанням додайте опис і [теги](work-with-tags-columns.md#manage-tags) до сегмента.

   :::image type="content" source="media/segments_edit_details.png" alt-text="Діалогове вікно &quot;Редагування відомостей&quot;.":::

1. **У розділі Правило1** виберіть атрибут сутності, за якою потрібно фільтрувати клієнтів. Існує два способи вибору атрибутів.
   - Прогляньте список доступних сутностей і атрибутів в області **Додати до правила** та виберіть піктограму **+** поруч із атрибутом, який потрібно додати. Виберіть, чи потрібно додати атрибут до наявного правила або ж слід використати його для створення нового правила.
   - Уведіть ім'я атрибута в розділі правила, щоб побачити відповідні пропозиції.

1. Виберіть оператори, щоб указати, які значення відповідатимуть умові. Значення атрибуту може належати до одного з чотирьох типів даних: числовий, рядок, дата або логічне значення. Залежно від типу даних атрибута для визначення умови будуть доступні різні оператори.

1. Виберіть **Додати умову**, щоб додати до правила більше умов. Щоб створити правило під поточним правилом, виберіть **Додати вкладене правило**.

1. Якщо в правилі використовуються інші сутності, крім *сутності Клієнта* (або *сутності ContactProfile* для B-to-B), установіть прапорець **Установити шлях** зв’язку, щоб зіставити вибрану сутність із об’єднаною сутністю клієнта. Якщо є лише один можливий шлях зв’язку, система вибирає його автоматично. Різні [шляхи](relationships.md#relationship-paths) зв’язків можуть давати різні результати. Кожне правило може мати власний шлях зв'язку.

   :::image type="content" source="media/relationship-path.png" alt-text="Можливий шлях зв'язку під час створення правила на основі сутності, зіставленої з уніфікованою сутністю клієнта.":::

1. Якщо в правилі є кілька умов, виберіть, який логічний оператор їх з’єднує.  
   - Оператор **І**: усі умови повинні виконуватися, щоб запис було включено до сегмента. Використовуйте цей параметр, коли ви визначаєте умови для різних сутностей.
   - Оператор **АБО**: будь-яка одна з умов повинна виконуватися, щоб запис було включено до сегмента. Використовуйте цей параметр, коли ви визначаєте кілька умов для однієї сутності.

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="Правило із двома умовами І.":::

   При використанні оператора АБО всі умови мають бути основані на сутностях, включених до шляху зв'язку.

1. Щоб створити різні набори записів клієнтів, створіть кілька правил. Щоб включити клієнтів, необхідних для вашого бізнес-кейсу, об’єднайте групи. Зокрема, якщо не вдається включити сутність у правило через вказаний шлях зв’язку, створіть нове правило для вибору атрибутів з нього.

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="Додайте нове правило до сегмента та виберіть оператор набору.":::

   1. Виберіть елемент **Додати правило**.
   1. Виберіть одну з операцій з множинами: **Об'єднання**, **Перетин** або **Окрім**.

      - **Об’єднання** об’єднує дві групи.
      - **Перетин** перекриває дві групи. Лише дані, які *є загальними* для обох груп, залишаються в уніфікованій групі.
      - **Окрім** об’єднує дві групи. Зберігатимуться лише дані у групі A, які *не є загальними* для даних у групі B.

1. За замовчуванням сутність виводу автоматично міститиме всі атрибути профілів клієнтів, які відповідають визначеним фільтрам. У службі B-to-B під час *використання сутності ContactProfile* ідентифікатор облікового запису автоматично включається. Якщо сегмент базується на інших сутностях, ніж *сутність Клієнта*, або містить більше атрибутів з *файлу ContactProfile*, виберіть атрибути **Project**, щоб додати більше атрибутів цих сутностей до вихідної сутності.
 
   Наприклад, сегмент базується на сутності, яка містить дані про придбання, що пов'язані із сутністю *Клієнт*. Цей сегмент шукає всіх клієнтів з Іспанії, які придбали товари у поточному році. Ви можете додати атрибути, такі як ціна товару або дата придбання, до всіх відповідних записів клієнтів у вихідній сутності. Така інформація може стати в пригоді для аналізу сезонності у загальних сумах видатків.

   :::image type="content" source="media/segments-project-attributes.png" alt-text="Приклад спроектованих атрибутів, вибраних у бічній області, які буде додано до вихідної сутності.":::
 
   Приклад вихідних даних для сегмента на основі бізнес-партнерів із прогнозованими атрибутами контактних осіб може виглядати таким чином:

   |ІДЕНТИФІКАТОР  |Ім’я облікового запису  |Дохід  |Ім’я контактної особи  | Роль контактної особи|
   |---------|---------|---------|---------|---|
   |10021     | Contoso | 100K | [Abbie Moss, Ruth Soto]  | [CEO, Procurement manager]

   > [!NOTE]
   > - **Атрибути** Project працюють лише для сутностей, які мають зв’язок «один-до-багатьох» із *Замовником* або *організацією ContactProfile*. Наприклад, один клієнт може мати кілька передплат.
   > - Якщо атрибут, який потрібно спроектувати, знаходиться на відстані кількох переходів від *сутності Customer* або *ContactProfile*, як визначено зв’язком, цей атрибут слід використовувати в кожному правилі сегментного запиту, який ви створюєте.
   > - Якщо атрибут, який потрібно спроектувати, знаходиться лише в *одному стрибку від сутності Customer* або *ContactProfile*, цей атрибут не обов’язково повинен бути присутнім у кожному правилі сегментного запиту, який ви створюєте.
   > - **Спроектовані атрибути** враховуються при використанні операцій з множинами.

1. Натисніть кнопку **Виконати**, щоб створити відрізок. Натисніть кнопку **Зберегти**, якщо потрібно зберегти поточну конфігурацію та запустити сегмент пізніше. Відобразиться сторінка **Сегменти**.

### <a name="segment-builder-tips"></a>Поради конструктора сегментів

Створюючи сегмент за допомогою конструктора сегментів, пам’ятайте про наступні поради:

- Конструктор сегментів не пропонуватиме припустимі значення із сутностей під час задавання операторів для умов. Ви можете відкрити **Дані** > **Сутності** і завантажити дані сутності, щоб побачити, які значення доступні.
- Умови на основі дат дають змогу переключатися між фіксованими датами та плаваючим діапазоном дат.
- Якщо для сегмента є кілька правил, поруч із правилом, що редагується, відображатиметься вертикальна синя лінія.
- Правила та умови можна переміщувати до інших місць у визначенні сегмента. Виберіть вертикальні три крапки (&vellip;) поруч із правилом або умовою та виберіть, як і куди їх перемістити.
- Елементи керування **Скасувати** та **Повторити** на панелі команд дозволяють відкочувати зміни.
- Після створення сегмента деякі сегменти дозволяють [відстежувати використання сегмента](segments.md#track-usage-of-a-segment).

## <a name="next-steps"></a>Наступні кроки

[Експортуйте сегмент](export-destinations.md) і ознайомтеся з [інтеграцією картки клієнта](customer-card-add-in.md) для використання сегментів в інших програмах.

[!INCLUDE [footer-include](includes/footer-banner.md)]
